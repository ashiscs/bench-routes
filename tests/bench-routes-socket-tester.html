<!DOCTYPE html>
<html lang="en">
<head>
	<style>
		.controls {
			margin: 40px;
		}
	</style>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!-- Bootstrap css -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"/>
	<title>Document</title>
</head>
<body>
	<div class="container">
			<div class="btn-group controls" role="group" aria-label="Button group with nested dropdown">  
					<!-- Ping -->
					<div class="btn-group" role="group">
					  <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Ping controls
					  </button>
					  <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
						<button class="dropdown-item btn" onclick="startPing()" href="#">Start Ping</button>
						<button class="dropdown-item btn" onclick="stopPing()" href="#">Stop Ping</button>
						</div>
					</div>
					<!-- FloodPing controls -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  FloodPing controls
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="startFloodPing()" href="#">Start FloodPing</button>
							  <button class="dropdown-item btn" onclick="stopFloodPing()" href="#">Stop FloodPing</button>
							  </div>
						  </div>
					<!-- Jitter controls -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  Jitter controls
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="startJitter()" href="#">Start Jitter</button>
							  <button class="dropdown-item btn" onclick="stopJitter()" href="#">Stop Jitter</button>
							  </div>
						  </div>
					<!-- Req res controls -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  Req-res controls
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="startReqResMonitoring()" href="#">Start Req-Res</button>
							  <button class="dropdown-item btn" onclick="stopReqResMonitoring()" href="#">Stop Req-Res</button>
							  </div>
						  </div>
			</div>

			<!-- Route configuration controls -->
			<div class="btn-group controls" role="group" aria-label="Button group with nested dropdown">  
					<!-- Get route details -->
					<div class="btn-group" role="group">
					  <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Route details
					  </button>
					  <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
						<button class="dropdown-item btn" onclick="routeDetails()" href="#">Get route details</button>
						</div>
					</div>
			</div>

			<!-- Querrier controls -->
			<div class="btn-group controls" role="group" aria-label="Button group with nested dropdown">  
					<!-- Ping Querrier -->
					<div class="btn-group" role="group">
					  <button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Ping Querier
					  </button>
					  <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
						<button class="dropdown-item btn" onclick="Qping()" href="#">Query Ping</button>
						</div>
					</div>
					<!-- Flood Ping querier -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  Flood Ping Querier
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="QFloodPing()" href="#">Query Flood Ping</button>
							  </div>
						  </div>
					<!-- Jitter querier -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  Jitter Querier
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="Qjitter()" href="#">Query Jitter</button>
							  </div>
						  </div>
					<!-- Req res querier -->
					<div class="btn-group" role="group">
							<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							  Req res Querier
							</button>
							<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
							  <button class="dropdown-item btn" onclick="Qreqresdelay()" href="#">Query Req-res</button>
							  </div>
						  </div>
			</div>
	</div>
	<!-- Jquery and bootstrap js -->
	<script
		src="https://code.jquery.com/jquery-3.4.1.min.js"
		integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
		crossorigin="anonymous">
	</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script>
		let socket = new WebSocket("ws://localhost:9090/websocket")
		console.warn('trying socket connection')

		socket.onopen = () => {
			console.log('connected')
			socket.send("hi from ui")
		}

		socket.onmessage = m => {
			console.log('message received as ', m)
		}

		socket.onclose = () => {
			console.warn("connection closed")
		}
		function startPing() {
			socket.send("force-start-ping")
		}
		function stopPing() {
			socket.send("force-stop-ping")
		}
		function startFloodPing() {
			socket.send("force-start-flood-ping")
		}
		function stopFloodPing() {
			socket.send("force-stop-flood-ping")
		}
		function startJitter() {
			socket.send("force-start-jitter")
		}
		function stopJitter() {
			socket.send("force-stop-jitter")
		}
		function routeDetails() {
			socket.send("route-details")
		}
		function Qping() {
			let url = {
				url: "google.co.in"
			};
			socket.send("Qping-route " + JSON.stringify(url));
		}
		function QFloodPing() {
			let url = {
				url: "google.co.in"
			};
			socket.send("Qflood-ping-route " + JSON.stringify(url));
		}
		function Qjitter() {
			let url = {
				url: "google.co.in"
			};
			socket.send("Qjitter-route " + JSON.stringify(url));
		}
		const Qreqresdelay = () => {
			let route = {
				url: "https://www.google.co.in",
				method: "GET"
			};
			socket.send("Qrequest-response-delay "+ JSON.stringify(route))
		}
		const startReqResMonitoring = () => {
			socket.send("force-start-req-res-monitoring")
		}
		const stopReqResMonitoring = () => {
			socket.send("force-stop-req-res-monitoring")
		}
	</script>

</body>
</html>
